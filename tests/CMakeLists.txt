enable_language(CXX)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

add_library(ipc_test STATIC test_runner.c)

add_executable(ipc_buffer_basic_test ipc_buffer_basic_test.c)
target_link_libraries(ipc_buffer_basic_test shm_ipc_static ipc_test)
add_test(NAME basic_ipc_buffer_tests COMMAND ipc_buffer_basic_test)

add_executable(ipc_buffer_concurrency_test ipc_buffer_concurrency_test.cpp) 
target_link_libraries(ipc_buffer_concurrency_test  shm_ipc_static ipc_test)
add_test(NAME concurrent_ipc_buffer_tests COMMAND ipc_buffer_concurrency_test)

